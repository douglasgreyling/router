<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>User Guide | Router</title>
  <meta name="description" content="A fast, flexible HTTP router for Go with automatic route helper generation">
  <link rel="stylesheet" href="/router/assets/css/style.css">
</head>
<body>
  <header class="header">
    <div class="header-content">
      <h1 class="site-title"><a href="/router/">Router</a></h1>
      <p class="site-description">A fast, flexible HTTP router for Go with automatic route helper generation</p>
    </div>
  </header>

  <nav class="main-nav">
    <a href="/router/" >Home</a>
    <a href="/router/getting-started" >Getting Started</a>
    <a href="/router/guide" class="active">Guide</a>
    <a href="/router/api-reference" >API Reference</a>
    <a href="/router/examples" >Examples</a>
    <a href="https://github.com/douglasgreyling/router" target="_blank">GitHub</a>
  </nav>

  <div class="container">
    
    <aside class="sidebar" id="sidebar">
      <nav class="sidebar-nav">
        <h4>On This Page</h4>
        <ul id="toc"></ul>
      </nav>
    </aside>
    

    <main class="content">
      <article>
        <h1 id="user-guide">User Guide</h1>

<p>A comprehensive guide to using the Router package.</p>

<h2 id="table-of-contents">Table of Contents</h2>

<ul>
  <li><a href="#middleware">Middleware</a></li>
  <li><a href="#route-groups">Route Groups</a></li>
  <li><a href="#restful-resources">RESTful Resources</a></li>
  <li><a href="#route-helpers">Route Helpers</a></li>
  <li><a href="#named-routes">Named Routes</a></li>
  <li><a href="#context-api">Context API</a></li>
</ul>

<h2 id="middleware">Middleware</h2>

<p>Middleware wraps handlers to add functionality before and/or after request handling. Middleware is executed in order: global → group → route-specific.</p>

<h3 id="creating-middleware">Creating Middleware</h3>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="n">loggingMiddleware</span><span class="p">(</span><span class="n">next</span> <span class="n">router</span><span class="o">.</span><span class="n">HandlerFunc</span><span class="p">)</span> <span class="n">router</span><span class="o">.</span><span class="n">HandlerFunc</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">func</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
        <span class="n">start</span> <span class="o">:=</span> <span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span>
        <span class="n">log</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Started %s %s"</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">Method</span><span class="p">(),</span> <span class="n">c</span><span class="o">.</span><span class="n">Path</span><span class="p">())</span>

        <span class="n">err</span> <span class="o">:=</span> <span class="n">next</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>  <span class="c">// Call the next handler</span>

        <span class="n">log</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Completed in %v"</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">Since</span><span class="p">(</span><span class="n">start</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">err</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="applying-middleware">Applying Middleware</h3>

<h4 id="global-middleware">Global Middleware</h4>

<p>Applied to all routes:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">r</span> <span class="o">:=</span> <span class="n">router</span><span class="o">.</span><span class="n">New</span><span class="p">()</span>
<span class="n">r</span><span class="o">.</span><span class="n">Use</span><span class="p">(</span><span class="n">loggingMiddleware</span><span class="p">)</span>
<span class="n">r</span><span class="o">.</span><span class="n">Use</span><span class="p">(</span><span class="n">authMiddleware</span><span class="p">)</span>

<span class="n">r</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/users"</span><span class="p">,</span> <span class="n">listUsers</span><span class="p">)</span>  <span class="c">// Uses both middleware</span>
</code></pre></div></div>

<h4 id="group-middleware">Group Middleware</h4>

<p>Applied to all routes in a group:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">api</span> <span class="o">:=</span> <span class="n">r</span><span class="o">.</span><span class="n">Group</span><span class="p">(</span><span class="s">"/api"</span><span class="p">,</span> <span class="n">authMiddleware</span><span class="p">,</span> <span class="n">rateLimitMiddleware</span><span class="p">)</span>
<span class="n">api</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/users"</span><span class="p">,</span> <span class="n">listUsers</span><span class="p">)</span>     <span class="c">// Uses auth + rate limit</span>
<span class="n">api</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/posts"</span><span class="p">,</span> <span class="n">listPosts</span><span class="p">)</span>     <span class="c">// Uses auth + rate limit</span>
</code></pre></div></div>

<h4 id="route-specific-middleware">Route-Specific Middleware</h4>

<p>Applied to individual routes:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">r</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/admin"</span><span class="p">,</span> <span class="n">adminHandler</span><span class="p">,</span>
    <span class="n">router</span><span class="o">.</span><span class="n">WithMiddleware</span><span class="p">(</span><span class="n">requireAdmin</span><span class="p">))</span>
</code></pre></div></div>

<h3 id="middleware-examples">Middleware Examples</h3>

<h4 id="authentication-middleware">Authentication Middleware</h4>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="n">authMiddleware</span><span class="p">(</span><span class="n">next</span> <span class="n">router</span><span class="o">.</span><span class="n">HandlerFunc</span><span class="p">)</span> <span class="n">router</span><span class="o">.</span><span class="n">HandlerFunc</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">func</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
        <span class="n">token</span> <span class="o">:=</span> <span class="n">c</span><span class="o">.</span><span class="n">Request</span><span class="p">()</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"Authorization"</span><span class="p">)</span>

        <span class="k">if</span> <span class="o">!</span><span class="n">isValidToken</span><span class="p">(</span><span class="n">token</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="m">401</span><span class="p">,</span> <span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span>
                <span class="s">"error"</span><span class="o">:</span> <span class="s">"Unauthorized"</span><span class="p">,</span>
            <span class="p">})</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">next</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="cors-middleware">CORS Middleware</h4>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="n">corsMiddleware</span><span class="p">(</span><span class="n">next</span> <span class="n">router</span><span class="o">.</span><span class="n">HandlerFunc</span><span class="p">)</span> <span class="n">router</span><span class="o">.</span><span class="n">HandlerFunc</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">func</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
        <span class="n">c</span><span class="o">.</span><span class="n">ResponseWriter</span><span class="p">()</span><span class="o">.</span><span class="n">Header</span><span class="p">()</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Access-Control-Allow-Origin"</span><span class="p">,</span> <span class="s">"*"</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">ResponseWriter</span><span class="p">()</span><span class="o">.</span><span class="n">Header</span><span class="p">()</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Access-Control-Allow-Methods"</span><span class="p">,</span> <span class="s">"GET, POST, PUT, DELETE"</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">Method</span><span class="p">()</span> <span class="o">==</span> <span class="s">"OPTIONS"</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="m">204</span><span class="p">,</span> <span class="s">""</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">next</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="route-groups">Route Groups</h2>

<p>Groups allow you to organize routes with common prefixes and middleware:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">r</span> <span class="o">:=</span> <span class="n">router</span><span class="o">.</span><span class="n">New</span><span class="p">()</span>

<span class="c">// API v1 group</span>
<span class="n">v1</span> <span class="o">:=</span> <span class="n">r</span><span class="o">.</span><span class="n">Group</span><span class="p">(</span><span class="s">"/api/v1"</span><span class="p">,</span> <span class="n">authMiddleware</span><span class="p">)</span>
<span class="n">v1</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/users"</span><span class="p">,</span> <span class="n">listUsers</span><span class="p">)</span>
<span class="n">v1</span><span class="o">.</span><span class="n">Post</span><span class="p">(</span><span class="s">"/users"</span><span class="p">,</span> <span class="n">createUser</span><span class="p">)</span>

<span class="c">// API v2 group</span>
<span class="n">v2</span> <span class="o">:=</span> <span class="n">r</span><span class="o">.</span><span class="n">Group</span><span class="p">(</span><span class="s">"/api/v2"</span><span class="p">,</span> <span class="n">authMiddleware</span><span class="p">,</span> <span class="n">newFeatureMiddleware</span><span class="p">)</span>
<span class="n">v2</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/users"</span><span class="p">,</span> <span class="n">listUsersV2</span><span class="p">)</span>
<span class="n">v2</span><span class="o">.</span><span class="n">Post</span><span class="p">(</span><span class="s">"/users"</span><span class="p">,</span> <span class="n">createUserV2</span><span class="p">)</span>

<span class="c">// Admin group</span>
<span class="n">admin</span> <span class="o">:=</span> <span class="n">r</span><span class="o">.</span><span class="n">Group</span><span class="p">(</span><span class="s">"/admin"</span><span class="p">,</span> <span class="n">authMiddleware</span><span class="p">,</span> <span class="n">adminMiddleware</span><span class="p">)</span>
<span class="n">admin</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/dashboard"</span><span class="p">,</span> <span class="n">showDashboard</span><span class="p">)</span>
<span class="n">admin</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/stats"</span><span class="p">,</span> <span class="n">showStats</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="nested-groups">Nested Groups</h3>

<p>Groups can be nested for better organization:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">api</span> <span class="o">:=</span> <span class="n">r</span><span class="o">.</span><span class="n">Group</span><span class="p">(</span><span class="s">"/api"</span><span class="p">)</span>
<span class="n">v1</span> <span class="o">:=</span> <span class="n">api</span><span class="o">.</span><span class="n">Group</span><span class="p">(</span><span class="s">"/v1"</span><span class="p">,</span> <span class="n">authMiddleware</span><span class="p">)</span>
<span class="n">users</span> <span class="o">:=</span> <span class="n">v1</span><span class="o">.</span><span class="n">Group</span><span class="p">(</span><span class="s">"/users"</span><span class="p">)</span>

<span class="n">users</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="n">listUsers</span><span class="p">)</span>        <span class="c">// GET /api/v1/users</span>
<span class="n">users</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/:id"</span><span class="p">,</span> <span class="n">showUser</span><span class="p">)</span>      <span class="c">// GET /api/v1/users/:id</span>
<span class="n">users</span><span class="o">.</span><span class="n">Post</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="n">createUser</span><span class="p">)</span>      <span class="c">// POST /api/v1/users</span>
</code></pre></div></div>

<h2 id="restful-resources">RESTful Resources</h2>

<p>The router provides Rails-inspired resource scaffolding for quickly creating RESTful APIs.</p>

<h3 id="controller-interface">Controller Interface</h3>

<p>Define a controller implementing the desired actions:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">type</span> <span class="n">PostController</span> <span class="k">struct</span><span class="p">{}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">pc</span> <span class="o">*</span><span class="n">PostController</span><span class="p">)</span> <span class="n">Index</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="n">posts</span> <span class="o">:=</span> <span class="n">getAllPosts</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="n">posts</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">pc</span> <span class="o">*</span><span class="n">PostController</span><span class="p">)</span> <span class="n">Show</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="n">id</span> <span class="o">:=</span> <span class="n">c</span><span class="o">.</span><span class="n">Param</span><span class="p">(</span><span class="s">"id"</span><span class="p">)</span>
    <span class="n">post</span> <span class="o">:=</span> <span class="n">findPost</span><span class="p">(</span><span class="n">id</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="n">post</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">pc</span> <span class="o">*</span><span class="n">PostController</span><span class="p">)</span> <span class="n">Create</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="c">// Parse request body and create post</span>
    <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="m">201</span><span class="p">,</span> <span class="n">newPost</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">pc</span> <span class="o">*</span><span class="n">PostController</span><span class="p">)</span> <span class="n">Edit</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="n">id</span> <span class="o">:=</span> <span class="n">c</span><span class="o">.</span><span class="n">Param</span><span class="p">(</span><span class="s">"id"</span><span class="p">)</span>
    <span class="n">post</span> <span class="o">:=</span> <span class="n">findPost</span><span class="p">(</span><span class="n">id</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="n">post</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">pc</span> <span class="o">*</span><span class="n">PostController</span><span class="p">)</span> <span class="n">Update</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="n">id</span> <span class="o">:=</span> <span class="n">c</span><span class="o">.</span><span class="n">Param</span><span class="p">(</span><span class="s">"id"</span><span class="p">)</span>
    <span class="c">// Update post logic</span>
    <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="n">updatedPost</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">pc</span> <span class="o">*</span><span class="n">PostController</span><span class="p">)</span> <span class="n">Delete</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="n">id</span> <span class="o">:=</span> <span class="n">c</span><span class="o">.</span><span class="n">Param</span><span class="p">(</span><span class="s">"id"</span><span class="p">)</span>
    <span class="c">// Delete post logic</span>
    <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="m">204</span><span class="p">,</span> <span class="s">""</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="registering-resources">Registering Resources</h3>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">r</span><span class="o">.</span><span class="n">Resources</span><span class="p">(</span><span class="s">"/posts"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">PostController</span><span class="p">{})</span>
</code></pre></div></div>

<p>This automatically creates these routes:</p>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Path</th>
      <th>Action</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>GET</td>
      <td>/posts</td>
      <td>Index</td>
      <td>List all posts</td>
    </tr>
    <tr>
      <td>GET</td>
      <td>/posts/new</td>
      <td>New</td>
      <td>Show create form</td>
    </tr>
    <tr>
      <td>POST</td>
      <td>/posts</td>
      <td>Create</td>
      <td>Create a post</td>
    </tr>
    <tr>
      <td>GET</td>
      <td>/posts/:id</td>
      <td>Show</td>
      <td>Show a specific post</td>
    </tr>
    <tr>
      <td>GET</td>
      <td>/posts/:id/edit</td>
      <td>Edit</td>
      <td>Show edit form</td>
    </tr>
    <tr>
      <td>PATCH/PUT</td>
      <td>/posts/:id</td>
      <td>Update</td>
      <td>Update a post</td>
    </tr>
    <tr>
      <td>DELETE</td>
      <td>/posts/:id</td>
      <td>Delete</td>
      <td>Delete a post</td>
    </tr>
  </tbody>
</table>

<h3 id="limiting-actions">Limiting Actions</h3>

<p>Use <code class="language-plaintext highlighter-rouge">Only</code> or <code class="language-plaintext highlighter-rouge">Except</code> to control which actions are created:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// Only these actions</span>
<span class="n">r</span><span class="o">.</span><span class="n">Resources</span><span class="p">(</span><span class="s">"/posts"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">PostController</span><span class="p">{},</span>
    <span class="n">router</span><span class="o">.</span><span class="n">Only</span><span class="p">(</span><span class="n">router</span><span class="o">.</span><span class="n">IndexAction</span><span class="p">,</span> <span class="n">router</span><span class="o">.</span><span class="n">ShowAction</span><span class="p">))</span>

<span class="c">// All actions except these</span>
<span class="n">r</span><span class="o">.</span><span class="n">Resources</span><span class="p">(</span><span class="s">"/comments"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">CommentController</span><span class="p">{},</span>
    <span class="n">router</span><span class="o">.</span><span class="n">Except</span><span class="p">(</span><span class="n">router</span><span class="o">.</span><span class="n">NewAction</span><span class="p">,</span> <span class="n">router</span><span class="o">.</span><span class="n">EditAction</span><span class="p">))</span>
</code></pre></div></div>

<h3 id="resource-middleware">Resource Middleware</h3>

<p>Apply middleware to all resource routes:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">r</span><span class="o">.</span><span class="n">Resources</span><span class="p">(</span><span class="s">"/posts"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">PostController</span><span class="p">{},</span>
    <span class="n">router</span><span class="o">.</span><span class="n">WithResourceMiddleware</span><span class="p">(</span><span class="n">authMiddleware</span><span class="p">,</span> <span class="n">loggingMiddleware</span><span class="p">))</span>
</code></pre></div></div>

<h2 id="route-helpers">Route Helpers</h2>

<p>The router automatically generates type-safe route helpers in development mode.</p>

<h3 id="route-naming">Route Naming</h3>

<p>Routes can be named in two ways:</p>

<h4 id="explicit-naming">Explicit Naming</h4>

<p>Use <code class="language-plaintext highlighter-rouge">WithName</code> to explicitly name a route:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">r</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/users/:id"</span><span class="p">,</span> <span class="n">showUser</span><span class="p">,</span> <span class="n">router</span><span class="o">.</span><span class="n">WithName</span><span class="p">(</span><span class="s">"users_show"</span><span class="p">))</span>
<span class="n">r</span><span class="o">.</span><span class="n">Post</span><span class="p">(</span><span class="s">"/login"</span><span class="p">,</span> <span class="n">loginHandler</span><span class="p">,</span> <span class="n">router</span><span class="o">.</span><span class="n">WithName</span><span class="p">(</span><span class="s">"auth_login"</span><span class="p">))</span>
</code></pre></div></div>

<h4 id="automatic-naming">Automatic Naming</h4>

<p>Routes without explicit names are automatically named based on their path and HTTP method:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">r</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/users/:id"</span><span class="p">,</span> <span class="n">showUser</span><span class="p">)</span>
<span class="c">// Auto-generated name: "users_id" or similar</span>

<span class="n">r</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/posts/:post_id/comments"</span><span class="p">,</span> <span class="n">listComments</span><span class="p">)</span>
<span class="c">// Auto-generated name: "posts_post_id_comments" or similar</span>
</code></pre></div></div>

<p><strong>Note:</strong> Explicit naming with <code class="language-plaintext highlighter-rouge">WithName</code> is recommended for important routes to ensure stable helper function names.</p>

<h4 id="resource-route-names">Resource Route Names</h4>

<p>Resource routes are automatically named using a standard convention:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">r</span><span class="o">.</span><span class="n">Resources</span><span class="p">(</span><span class="s">"/posts"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">PostController</span><span class="p">{})</span>
</code></pre></div></div>

<p>This creates the following named routes:</p>

<table>
  <thead>
    <tr>
      <th>Action</th>
      <th>Method</th>
      <th>Path</th>
      <th>Route Name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Index</td>
      <td>GET</td>
      <td>/posts</td>
      <td><code class="language-plaintext highlighter-rouge">posts_index</code></td>
    </tr>
    <tr>
      <td>New</td>
      <td>GET</td>
      <td>/posts/new</td>
      <td><code class="language-plaintext highlighter-rouge">posts_new</code></td>
    </tr>
    <tr>
      <td>Create</td>
      <td>POST</td>
      <td>/posts</td>
      <td><code class="language-plaintext highlighter-rouge">posts_create</code></td>
    </tr>
    <tr>
      <td>Show</td>
      <td>GET</td>
      <td>/posts/:id</td>
      <td><code class="language-plaintext highlighter-rouge">posts_show</code></td>
    </tr>
    <tr>
      <td>Edit</td>
      <td>GET</td>
      <td>/posts/:id/edit</td>
      <td><code class="language-plaintext highlighter-rouge">posts_edit</code></td>
    </tr>
    <tr>
      <td>Update</td>
      <td>PATCH/PUT</td>
      <td>/posts/:id</td>
      <td><code class="language-plaintext highlighter-rouge">posts_update</code></td>
    </tr>
    <tr>
      <td>Delete</td>
      <td>DELETE</td>
      <td>/posts/:id</td>
      <td><code class="language-plaintext highlighter-rouge">posts_delete</code></td>
    </tr>
  </tbody>
</table>

<p>The naming pattern is: <code class="language-plaintext highlighter-rouge">{resource_name}_{action}</code> (e.g., <code class="language-plaintext highlighter-rouge">posts_show</code>, <code class="language-plaintext highlighter-rouge">users_create</code>)</p>

<h3 id="generated-helpers">Generated Helpers</h3>

<p>For named routes, helpers are generated in <code class="language-plaintext highlighter-rouge">routes/generated.go</code>:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">r</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/users/:id"</span><span class="p">,</span> <span class="n">showUser</span><span class="p">,</span> <span class="n">router</span><span class="o">.</span><span class="n">WithName</span><span class="p">(</span><span class="s">"users_show"</span><span class="p">))</span>
<span class="n">r</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/posts/:id/comments/:comment_id"</span><span class="p">,</span> <span class="n">showComment</span><span class="p">,</span>
    <span class="n">router</span><span class="o">.</span><span class="n">WithName</span><span class="p">(</span><span class="s">"post_comments_show"</span><span class="p">))</span>
</code></pre></div></div>

<p>Generated helpers:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="s">"yourapp/routes"</span>

<span class="c">// Simple route</span>
<span class="n">url</span> <span class="o">:=</span> <span class="n">routes</span><span class="o">.</span><span class="n">UsersShowPath</span><span class="p">(</span><span class="s">"123"</span><span class="p">)</span>
<span class="c">// Returns: /users/123</span>

<span class="c">// Nested route</span>
<span class="n">url</span> <span class="o">:=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PostCommentsShowPath</span><span class="p">(</span><span class="s">"456"</span><span class="p">,</span> <span class="s">"789"</span><span class="p">)</span>
<span class="c">// Returns: /posts/456/comments/789</span>

<span class="c">// Resource routes</span>
<span class="n">url</span> <span class="o">:=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PostsShowPath</span><span class="p">(</span><span class="s">"42"</span><span class="p">)</span>
<span class="c">// Returns: /posts/42</span>

<span class="n">url</span> <span class="o">:=</span> <span class="n">routes</span><span class="o">.</span><span class="n">PostsIndexPath</span><span class="p">()</span>
<span class="c">// Returns: /posts</span>
</code></pre></div></div>

<h3 id="customizing-generation">Customizing Generation</h3>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">r</span><span class="o">.</span><span class="n">Serve</span><span class="p">(</span>
    <span class="n">router</span><span class="o">.</span><span class="n">WithRoutesPackage</span><span class="p">(</span><span class="s">"api"</span><span class="p">),</span>
    <span class="n">router</span><span class="o">.</span><span class="n">WithRoutesOutputFile</span><span class="p">(</span><span class="s">"api/routes.go"</span><span class="p">),</span>
    <span class="n">router</span><span class="o">.</span><span class="n">WithGenerateHelpers</span><span class="p">(</span><span class="no">true</span><span class="p">),</span>
<span class="p">)</span>
</code></pre></div></div>

<h3 id="disabling-generation">Disabling Generation</h3>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// Disable in production</span>
<span class="n">r</span><span class="o">.</span><span class="n">Serve</span><span class="p">(</span><span class="n">router</span><span class="o">.</span><span class="n">WithGenerateHelpers</span><span class="p">(</span><span class="no">false</span><span class="p">))</span>
</code></pre></div></div>

<h2 id="context-api">Context API</h2>

<p>The Context provides methods for request handling and response generation.</p>

<h3 id="request-information">Request Information</h3>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="n">handler</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="n">c</span><span class="o">.</span><span class="n">Method</span><span class="p">()</span>            <span class="c">// HTTP method</span>
    <span class="n">path</span> <span class="o">:=</span> <span class="n">c</span><span class="o">.</span><span class="n">Path</span><span class="p">()</span>                <span class="c">// Request path</span>
    <span class="n">req</span> <span class="o">:=</span> <span class="n">c</span><span class="o">.</span><span class="n">Request</span><span class="p">()</span>              <span class="c">// *http.Request</span>

    <span class="c">// Route parameters</span>
    <span class="n">id</span> <span class="o">:=</span> <span class="n">c</span><span class="o">.</span><span class="n">Param</span><span class="p">(</span><span class="s">"id"</span><span class="p">)</span>
    <span class="n">filepath</span> <span class="o">:=</span> <span class="n">c</span><span class="o">.</span><span class="n">Param</span><span class="p">(</span><span class="s">"filepath"</span><span class="p">)</span>

    <span class="k">return</span> <span class="no">nil</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="response-methods">Response Methods</h3>

<h4 id="json-response">JSON Response</h4>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="n">handler</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="n">data</span> <span class="o">:=</span> <span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="k">interface</span><span class="p">{}{</span>
        <span class="s">"users"</span><span class="o">:</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"Alice"</span><span class="p">,</span> <span class="s">"Bob"</span><span class="p">},</span>
        <span class="s">"count"</span><span class="o">:</span> <span class="m">2</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="string-response">String Response</h4>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="n">handler</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="s">"Hello, World!"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="html-response">HTML Response</h4>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="n">handler</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="n">html</span> <span class="o">:=</span> <span class="s">"&lt;html&gt;&lt;body&gt;&lt;h1&gt;Welcome&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;"</span>
    <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="n">html</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="direct-access">Direct Access</h3>

<p>For advanced use cases, access the underlying objects:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="n">handler</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="c">// Direct access to http.ResponseWriter</span>
    <span class="n">w</span> <span class="o">:=</span> <span class="n">c</span><span class="o">.</span><span class="n">ResponseWriter</span><span class="p">()</span>
    <span class="n">w</span><span class="o">.</span><span class="n">Header</span><span class="p">()</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-Custom-Header"</span><span class="p">,</span> <span class="s">"value"</span><span class="p">)</span>

    <span class="c">// Direct access to http.Request</span>
    <span class="n">r</span> <span class="o">:=</span> <span class="n">c</span><span class="o">.</span><span class="n">Request</span><span class="p">()</span>
    <span class="n">userAgent</span> <span class="o">:=</span> <span class="n">r</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"User-Agent"</span><span class="p">)</span>

    <span class="c">// Check if headers were already written</span>
    <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">IsHeaderWritten</span><span class="p">()</span> <span class="p">{</span>
        <span class="c">// Cannot write headers again</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="s">"Response"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="best-practices">Best Practices</h2>

<h3 id="1-use-middleware-wisely">1. Use Middleware Wisely</h3>

<p>Apply middleware at the appropriate level:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// Global: logging, CORS, recovery</span>
<span class="n">r</span><span class="o">.</span><span class="n">Use</span><span class="p">(</span><span class="n">loggingMiddleware</span><span class="p">,</span> <span class="n">corsMiddleware</span><span class="p">)</span>

<span class="c">// Group: authentication for API routes</span>
<span class="n">api</span> <span class="o">:=</span> <span class="n">r</span><span class="o">.</span><span class="n">Group</span><span class="p">(</span><span class="s">"/api"</span><span class="p">,</span> <span class="n">authMiddleware</span><span class="p">)</span>

<span class="c">// Route: specific rate limiting</span>
<span class="n">r</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/expensive"</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">router</span><span class="o">.</span><span class="n">WithMiddleware</span><span class="p">(</span><span class="n">rateLimitMiddleware</span><span class="p">))</span>
</code></pre></div></div>

<h3 id="2-organize-with-groups">2. Organize with Groups</h3>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">r</span> <span class="o">:=</span> <span class="n">router</span><span class="o">.</span><span class="n">New</span><span class="p">()</span>

<span class="c">// Public routes</span>
<span class="n">r</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="n">homeHandler</span><span class="p">)</span>
<span class="n">r</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/about"</span><span class="p">,</span> <span class="n">aboutHandler</span><span class="p">)</span>

<span class="c">// Authenticated API</span>
<span class="n">api</span> <span class="o">:=</span> <span class="n">r</span><span class="o">.</span><span class="n">Group</span><span class="p">(</span><span class="s">"/api"</span><span class="p">,</span> <span class="n">authMiddleware</span><span class="p">)</span>
<span class="n">api</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/profile"</span><span class="p">,</span> <span class="n">profileHandler</span><span class="p">)</span>

<span class="c">// Admin panel</span>
<span class="n">admin</span> <span class="o">:=</span> <span class="n">r</span><span class="o">.</span><span class="n">Group</span><span class="p">(</span><span class="s">"/admin"</span><span class="p">,</span> <span class="n">authMiddleware</span><span class="p">,</span> <span class="n">adminMiddleware</span><span class="p">)</span>
<span class="n">admin</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/dashboard"</span><span class="p">,</span> <span class="n">dashboardHandler</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="3-use-resources-for-crud">3. Use Resources for CRUD</h3>

<p>When building RESTful APIs, prefer resources over individual routes:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// Instead of:</span>
<span class="n">r</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/posts"</span><span class="p">,</span> <span class="n">listPosts</span><span class="p">)</span>
<span class="n">r</span><span class="o">.</span><span class="n">Post</span><span class="p">(</span><span class="s">"/posts"</span><span class="p">,</span> <span class="n">createPost</span><span class="p">)</span>
<span class="n">r</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/posts/:id"</span><span class="p">,</span> <span class="n">showPost</span><span class="p">)</span>
<span class="c">// ...</span>

<span class="c">// Use:</span>
<span class="n">r</span><span class="o">.</span><span class="n">Resources</span><span class="p">(</span><span class="s">"/posts"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">PostController</span><span class="p">{})</span>
</code></pre></div></div>

<h3 id="4-handle-errors-consistently">4. Handle Errors Consistently</h3>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">r</span><span class="o">.</span><span class="n">ErrorHandler</span> <span class="o">=</span> <span class="k">func</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span> <span class="n">err</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">IsHeaderWritten</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">log</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Error after headers sent: %v"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="n">code</span> <span class="o">:=</span> <span class="m">500</span>
    <span class="n">message</span> <span class="o">:=</span> <span class="s">"Internal Server Error"</span>

    <span class="c">// Type assert for custom error types</span>
    <span class="k">if</span> <span class="n">apiErr</span><span class="p">,</span> <span class="n">ok</span> <span class="o">:=</span> <span class="n">err</span><span class="o">.</span><span class="p">(</span><span class="o">*</span><span class="n">APIError</span><span class="p">);</span> <span class="n">ok</span> <span class="p">{</span>
        <span class="n">code</span> <span class="o">=</span> <span class="n">apiErr</span><span class="o">.</span><span class="n">Code</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">apiErr</span><span class="o">.</span><span class="n">Message</span>
    <span class="p">}</span>

    <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span><span class="s">"error"</span><span class="o">:</span> <span class="n">message</span><span class="p">})</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="5-name-important-routes">5. Name Important Routes</h3>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// Generate type-safe URL helpers</span>
<span class="n">r</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/users/:id"</span><span class="p">,</span> <span class="n">showUser</span><span class="p">,</span> <span class="n">router</span><span class="o">.</span><span class="n">WithName</span><span class="p">(</span><span class="s">"users_show"</span><span class="p">))</span>
<span class="n">r</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/posts/:id/edit"</span><span class="p">,</span> <span class="n">editPost</span><span class="p">,</span> <span class="n">router</span><span class="o">.</span><span class="n">WithName</span><span class="p">(</span><span class="s">"posts_edit"</span><span class="p">))</span>
</code></pre></div></div>

      </article>
    </main>
  </div>

  <footer class="footer">
    <p>&copy; 2025 Router. Licensed under MIT License.</p>
    <p>
      <a href="https://github.com/douglasgreyling/router">GitHub</a> |
      <a href="https://pkg.go.dev/github.com/douglasgreyling/router">pkg.go.dev</a>
    </p>
  </footer>

  <script src="/router/assets/js/toc.js"></script>
</body>
</html>
