<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Examples | Router</title>
  <meta name="description" content="A fast, flexible HTTP router for Go with automatic route helper generation">
  <link rel="stylesheet" href="/router/assets/css/style.css">
</head>
<body>
  <header class="header">
    <div class="header-content">
      <h1 class="site-title"><a href="/router/">Router</a></h1>
      <p class="site-description">A fast, flexible HTTP router for Go with automatic route helper generation</p>
    </div>
  </header>

  <nav class="main-nav">
    <a href="/router/" >Home</a>
    <a href="/router/getting-started" >Getting Started</a>
    <a href="/router/guide" >Guide</a>
    <a href="/router/api-reference" >API Reference</a>
    <a href="/router/examples" class="active">Examples</a>
    <a href="https://github.com/douglasgreyling/router" target="_blank">GitHub</a>
  </nav>

  <div class="container">
    
    <aside class="sidebar" id="sidebar">
      <nav class="sidebar-nav">
        <h4>On This Page</h4>
        <ul id="toc"></ul>
      </nav>
    </aside>
    

    <main class="content">
      <article>
        <h1 id="examples">Examples</h1>

<p>Real-world examples demonstrating various router features.</p>

<h2 id="basic-rest-api">Basic REST API</h2>

<p>A simple REST API with CRUD operations:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"github.com/douglasgreyling/router"</span>
    <span class="s">"net/http"</span>
<span class="p">)</span>

<span class="k">type</span> <span class="n">Post</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="n">ID</span>    <span class="kt">string</span> <span class="s">`json:"id"`</span>
    <span class="n">Title</span> <span class="kt">string</span> <span class="s">`json:"title"`</span>
    <span class="n">Body</span>  <span class="kt">string</span> <span class="s">`json:"body"`</span>
<span class="p">}</span>

<span class="k">var</span> <span class="n">posts</span> <span class="o">=</span> <span class="p">[]</span><span class="n">Post</span><span class="p">{</span>
    <span class="p">{</span><span class="n">ID</span><span class="o">:</span> <span class="s">"1"</span><span class="p">,</span> <span class="n">Title</span><span class="o">:</span> <span class="s">"First Post"</span><span class="p">,</span> <span class="n">Body</span><span class="o">:</span> <span class="s">"Hello World"</span><span class="p">},</span>
    <span class="p">{</span><span class="n">ID</span><span class="o">:</span> <span class="s">"2"</span><span class="p">,</span> <span class="n">Title</span><span class="o">:</span> <span class="s">"Second Post"</span><span class="p">,</span> <span class="n">Body</span><span class="o">:</span> <span class="s">"Another post"</span><span class="p">},</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">r</span> <span class="o">:=</span> <span class="n">router</span><span class="o">.</span><span class="n">New</span><span class="p">()</span>

    <span class="n">r</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/posts"</span><span class="p">,</span> <span class="n">listPosts</span><span class="p">)</span>
    <span class="n">r</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/posts/:id"</span><span class="p">,</span> <span class="n">showPost</span><span class="p">)</span>
    <span class="n">r</span><span class="o">.</span><span class="n">Post</span><span class="p">(</span><span class="s">"/posts"</span><span class="p">,</span> <span class="n">createPost</span><span class="p">)</span>
    <span class="n">r</span><span class="o">.</span><span class="n">Put</span><span class="p">(</span><span class="s">"/posts/:id"</span><span class="p">,</span> <span class="n">updatePost</span><span class="p">)</span>
    <span class="n">r</span><span class="o">.</span><span class="n">Delete</span><span class="p">(</span><span class="s">"/posts/:id"</span><span class="p">,</span> <span class="n">deletePost</span><span class="p">)</span>

    <span class="n">r</span><span class="o">.</span><span class="n">Serve</span><span class="p">()</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">listPosts</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="n">posts</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">showPost</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="n">id</span> <span class="o">:=</span> <span class="n">c</span><span class="o">.</span><span class="n">Param</span><span class="p">(</span><span class="s">"id"</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">post</span> <span class="o">:=</span> <span class="k">range</span> <span class="n">posts</span> <span class="p">{</span>
        <span class="k">if</span> <span class="n">post</span><span class="o">.</span><span class="n">ID</span> <span class="o">==</span> <span class="n">id</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="n">post</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="m">404</span><span class="p">,</span> <span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span><span class="s">"error"</span><span class="o">:</span> <span class="s">"Post not found"</span><span class="p">})</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">createPost</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="k">var</span> <span class="n">post</span> <span class="n">Post</span>
    <span class="c">// Parse JSON body (simplified)</span>
    <span class="n">posts</span> <span class="o">=</span> <span class="nb">append</span><span class="p">(</span><span class="n">posts</span><span class="p">,</span> <span class="n">post</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="m">201</span><span class="p">,</span> <span class="n">post</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">updatePost</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="n">id</span> <span class="o">:=</span> <span class="n">c</span><span class="o">.</span><span class="n">Param</span><span class="p">(</span><span class="s">"id"</span><span class="p">)</span>
    <span class="c">// Update logic here</span>
    <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span><span class="s">"id"</span><span class="o">:</span> <span class="n">id</span><span class="p">,</span> <span class="s">"status"</span><span class="o">:</span> <span class="s">"updated"</span><span class="p">})</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">deletePost</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="n">id</span> <span class="o">:=</span> <span class="n">c</span><span class="o">.</span><span class="n">Param</span><span class="p">(</span><span class="s">"id"</span><span class="p">)</span>
    <span class="c">// Delete logic here</span>
    <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="m">204</span><span class="p">,</span> <span class="s">""</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="restful-resources">RESTful Resources</h2>

<p>Using resource controllers for cleaner code:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"github.com/douglasgreyling/router"</span>
    <span class="s">"net/http"</span>
<span class="p">)</span>

<span class="k">type</span> <span class="n">UserController</span> <span class="k">struct</span><span class="p">{}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">uc</span> <span class="o">*</span><span class="n">UserController</span><span class="p">)</span> <span class="n">Index</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="n">users</span> <span class="o">:=</span> <span class="p">[]</span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span>
        <span class="p">{</span><span class="s">"id"</span><span class="o">:</span> <span class="s">"1"</span><span class="p">,</span> <span class="s">"name"</span><span class="o">:</span> <span class="s">"Alice"</span><span class="p">},</span>
        <span class="p">{</span><span class="s">"id"</span><span class="o">:</span> <span class="s">"2"</span><span class="p">,</span> <span class="s">"name"</span><span class="o">:</span> <span class="s">"Bob"</span><span class="p">},</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="n">users</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">uc</span> <span class="o">*</span><span class="n">UserController</span><span class="p">)</span> <span class="n">Show</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="n">id</span> <span class="o">:=</span> <span class="n">c</span><span class="o">.</span><span class="n">Param</span><span class="p">(</span><span class="s">"id"</span><span class="p">)</span>
    <span class="n">user</span> <span class="o">:=</span> <span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span>
        <span class="s">"id"</span><span class="o">:</span>   <span class="n">id</span><span class="p">,</span>
        <span class="s">"name"</span><span class="o">:</span> <span class="s">"User "</span> <span class="o">+</span> <span class="n">id</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="n">user</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">uc</span> <span class="o">*</span><span class="n">UserController</span><span class="p">)</span> <span class="n">Create</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="c">// Parse request and create user</span>
    <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="m">201</span><span class="p">,</span> <span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span>
        <span class="s">"status"</span><span class="o">:</span> <span class="s">"created"</span><span class="p">,</span>
    <span class="p">})</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">uc</span> <span class="o">*</span><span class="n">UserController</span><span class="p">)</span> <span class="n">Update</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="n">id</span> <span class="o">:=</span> <span class="n">c</span><span class="o">.</span><span class="n">Param</span><span class="p">(</span><span class="s">"id"</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span>
        <span class="s">"id"</span><span class="o">:</span>     <span class="n">id</span><span class="p">,</span>
        <span class="s">"status"</span><span class="o">:</span> <span class="s">"updated"</span><span class="p">,</span>
    <span class="p">})</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">uc</span> <span class="o">*</span><span class="n">UserController</span><span class="p">)</span> <span class="n">Delete</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="m">204</span><span class="p">,</span> <span class="s">""</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">r</span> <span class="o">:=</span> <span class="n">router</span><span class="o">.</span><span class="n">New</span><span class="p">()</span>

    <span class="n">r</span><span class="o">.</span><span class="n">Resources</span><span class="p">(</span><span class="s">"/users"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">UserController</span><span class="p">{})</span>

    <span class="n">r</span><span class="o">.</span><span class="n">Serve</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="middleware-chain">Middleware Chain</h2>

<p>Authentication and logging middleware:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"github.com/douglasgreyling/router"</span>
    <span class="s">"log"</span>
    <span class="s">"time"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">loggingMiddleware</span><span class="p">(</span><span class="n">next</span> <span class="n">router</span><span class="o">.</span><span class="n">HandlerFunc</span><span class="p">)</span> <span class="n">router</span><span class="o">.</span><span class="n">HandlerFunc</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">func</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
        <span class="n">start</span> <span class="o">:=</span> <span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span>
        <span class="n">log</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"→ %s %s"</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">Method</span><span class="p">(),</span> <span class="n">c</span><span class="o">.</span><span class="n">Path</span><span class="p">())</span>

        <span class="n">err</span> <span class="o">:=</span> <span class="n">next</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>

        <span class="n">duration</span> <span class="o">:=</span> <span class="n">time</span><span class="o">.</span><span class="n">Since</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
        <span class="n">log</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"← %s %s (%v)"</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">Method</span><span class="p">(),</span> <span class="n">c</span><span class="o">.</span><span class="n">Path</span><span class="p">(),</span> <span class="n">duration</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">err</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">authMiddleware</span><span class="p">(</span><span class="n">next</span> <span class="n">router</span><span class="o">.</span><span class="n">HandlerFunc</span><span class="p">)</span> <span class="n">router</span><span class="o">.</span><span class="n">HandlerFunc</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">func</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
        <span class="n">token</span> <span class="o">:=</span> <span class="n">c</span><span class="o">.</span><span class="n">Request</span><span class="p">()</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"Authorization"</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">token</span> <span class="o">!=</span> <span class="s">"Bearer secret-token"</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="m">401</span><span class="p">,</span> <span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span>
                <span class="s">"error"</span><span class="o">:</span> <span class="s">"Unauthorized"</span><span class="p">,</span>
            <span class="p">})</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">next</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">rateLimitMiddleware</span><span class="p">(</span><span class="n">next</span> <span class="n">router</span><span class="o">.</span><span class="n">HandlerFunc</span><span class="p">)</span> <span class="n">router</span><span class="o">.</span><span class="n">HandlerFunc</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">func</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
        <span class="c">// Rate limiting logic</span>
        <span class="k">return</span> <span class="n">next</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">r</span> <span class="o">:=</span> <span class="n">router</span><span class="o">.</span><span class="n">New</span><span class="p">()</span>

    <span class="c">// Global logging</span>
    <span class="n">r</span><span class="o">.</span><span class="n">Use</span><span class="p">(</span><span class="n">loggingMiddleware</span><span class="p">)</span>

    <span class="c">// Public routes</span>
    <span class="n">r</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="s">"Public page"</span><span class="p">)</span>
    <span class="p">})</span>

    <span class="c">// Protected API routes</span>
    <span class="n">api</span> <span class="o">:=</span> <span class="n">r</span><span class="o">.</span><span class="n">Group</span><span class="p">(</span><span class="s">"/api"</span><span class="p">,</span> <span class="n">authMiddleware</span><span class="p">,</span> <span class="n">rateLimitMiddleware</span><span class="p">)</span>
    <span class="n">api</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/profile"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span>
            <span class="s">"user"</span><span class="o">:</span> <span class="s">"authenticated-user"</span><span class="p">,</span>
        <span class="p">})</span>
    <span class="p">})</span>

    <span class="n">r</span><span class="o">.</span><span class="n">Serve</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="api-with-versioning">API with Versioning</h2>

<p>Managing multiple API versions:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"github.com/douglasgreyling/router"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">r</span> <span class="o">:=</span> <span class="n">router</span><span class="o">.</span><span class="n">New</span><span class="p">()</span>

    <span class="c">// API v1</span>
    <span class="n">v1</span> <span class="o">:=</span> <span class="n">r</span><span class="o">.</span><span class="n">Group</span><span class="p">(</span><span class="s">"/api/v1"</span><span class="p">)</span>
    <span class="n">v1</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/users"</span><span class="p">,</span> <span class="n">listUsersV1</span><span class="p">)</span>
    <span class="n">v1</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/posts"</span><span class="p">,</span> <span class="n">listPostsV1</span><span class="p">)</span>

    <span class="c">// API v2 with breaking changes</span>
    <span class="n">v2</span> <span class="o">:=</span> <span class="n">r</span><span class="o">.</span><span class="n">Group</span><span class="p">(</span><span class="s">"/api/v2"</span><span class="p">)</span>
    <span class="n">v2</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/users"</span><span class="p">,</span> <span class="n">listUsersV2</span><span class="p">)</span>
    <span class="n">v2</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/posts"</span><span class="p">,</span> <span class="n">listPostsV2</span><span class="p">)</span>

    <span class="n">r</span><span class="o">.</span><span class="n">Serve</span><span class="p">()</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">listUsersV1</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="k">interface</span><span class="p">{}{</span>
        <span class="s">"version"</span><span class="o">:</span> <span class="s">"v1"</span><span class="p">,</span>
        <span class="s">"users"</span><span class="o">:</span>   <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"Alice"</span><span class="p">,</span> <span class="s">"Bob"</span><span class="p">},</span>
    <span class="p">})</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">listUsersV2</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="k">interface</span><span class="p">{}{</span>
        <span class="s">"version"</span><span class="o">:</span> <span class="s">"v2"</span><span class="p">,</span>
        <span class="s">"data"</span><span class="o">:</span> <span class="p">[]</span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="k">interface</span><span class="p">{}{</span>
            <span class="p">{</span><span class="s">"id"</span><span class="o">:</span> <span class="m">1</span><span class="p">,</span> <span class="s">"name"</span><span class="o">:</span> <span class="s">"Alice"</span><span class="p">,</span> <span class="s">"email"</span><span class="o">:</span> <span class="s">"alice@example.com"</span><span class="p">},</span>
            <span class="p">{</span><span class="s">"id"</span><span class="o">:</span> <span class="m">2</span><span class="p">,</span> <span class="s">"name"</span><span class="o">:</span> <span class="s">"Bob"</span><span class="p">,</span> <span class="s">"email"</span><span class="o">:</span> <span class="s">"bob@example.com"</span><span class="p">},</span>
        <span class="p">},</span>
        <span class="s">"meta"</span><span class="o">:</span> <span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="s">"total"</span><span class="o">:</span> <span class="m">2</span><span class="p">},</span>
    <span class="p">})</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">listPostsV1</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"Post 1"</span><span class="p">,</span> <span class="s">"Post 2"</span><span class="p">})</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">listPostsV2</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="k">interface</span><span class="p">{}{</span>
        <span class="s">"posts"</span><span class="o">:</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"Post 1"</span><span class="p">,</span> <span class="s">"Post 2"</span><span class="p">},</span>
        <span class="s">"count"</span><span class="o">:</span> <span class="m">2</span><span class="p">,</span>
    <span class="p">})</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="custom-error-handling">Custom Error Handling</h2>

<p>Structured error responses:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"github.com/douglasgreyling/router"</span>
    <span class="s">"log"</span>
<span class="p">)</span>

<span class="k">type</span> <span class="n">APIError</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="n">Code</span>    <span class="kt">int</span>    <span class="s">`json:"-"`</span>
    <span class="n">Message</span> <span class="kt">string</span> <span class="s">`json:"message"`</span>
    <span class="n">Details</span> <span class="kt">string</span> <span class="s">`json:"details,omitempty"`</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">e</span> <span class="o">*</span><span class="n">APIError</span><span class="p">)</span> <span class="n">Error</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">e</span><span class="o">.</span><span class="n">Message</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">NewNotFoundError</span><span class="p">(</span><span class="n">resource</span> <span class="kt">string</span><span class="p">)</span> <span class="o">*</span><span class="n">APIError</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">&amp;</span><span class="n">APIError</span><span class="p">{</span>
        <span class="n">Code</span><span class="o">:</span>    <span class="m">404</span><span class="p">,</span>
        <span class="n">Message</span><span class="o">:</span> <span class="s">"Resource not found"</span><span class="p">,</span>
        <span class="n">Details</span><span class="o">:</span> <span class="n">resource</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">NewValidationError</span><span class="p">(</span><span class="n">msg</span> <span class="kt">string</span><span class="p">)</span> <span class="o">*</span><span class="n">APIError</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">&amp;</span><span class="n">APIError</span><span class="p">{</span>
        <span class="n">Code</span><span class="o">:</span>    <span class="m">400</span><span class="p">,</span>
        <span class="n">Message</span><span class="o">:</span> <span class="s">"Validation error"</span><span class="p">,</span>
        <span class="n">Details</span><span class="o">:</span> <span class="n">msg</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">r</span> <span class="o">:=</span> <span class="n">router</span><span class="o">.</span><span class="n">New</span><span class="p">()</span>

    <span class="c">// Custom error handler</span>
    <span class="n">r</span><span class="o">.</span><span class="n">ErrorHandler</span> <span class="o">=</span> <span class="k">func</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span> <span class="n">err</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">IsHeaderWritten</span><span class="p">()</span> <span class="p">{</span>
            <span class="n">log</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Error after headers sent: %v"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="p">}</span>

        <span class="n">code</span> <span class="o">:=</span> <span class="m">500</span>
        <span class="n">message</span> <span class="o">:=</span> <span class="s">"Internal Server Error"</span>
        <span class="k">var</span> <span class="n">details</span> <span class="kt">string</span>

        <span class="c">// Check for custom error types</span>
        <span class="k">if</span> <span class="n">apiErr</span><span class="p">,</span> <span class="n">ok</span> <span class="o">:=</span> <span class="n">err</span><span class="o">.</span><span class="p">(</span><span class="o">*</span><span class="n">APIError</span><span class="p">);</span> <span class="n">ok</span> <span class="p">{</span>
            <span class="n">code</span> <span class="o">=</span> <span class="n">apiErr</span><span class="o">.</span><span class="n">Code</span>
            <span class="n">message</span> <span class="o">=</span> <span class="n">apiErr</span><span class="o">.</span><span class="n">Message</span>
            <span class="n">details</span> <span class="o">=</span> <span class="n">apiErr</span><span class="o">.</span><span class="n">Details</span>
        <span class="p">}</span>

        <span class="n">response</span> <span class="o">:=</span> <span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="k">interface</span><span class="p">{}{</span>
            <span class="s">"error"</span><span class="o">:</span> <span class="n">message</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">details</span> <span class="o">!=</span> <span class="s">""</span> <span class="p">{</span>
            <span class="n">response</span><span class="p">[</span><span class="s">"details"</span><span class="p">]</span> <span class="o">=</span> <span class="n">details</span>
        <span class="p">}</span>

        <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">r</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/users/:id"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
        <span class="n">id</span> <span class="o">:=</span> <span class="n">c</span><span class="o">.</span><span class="n">Param</span><span class="p">(</span><span class="s">"id"</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">id</span> <span class="o">==</span> <span class="s">""</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">NewValidationError</span><span class="p">(</span><span class="s">"User ID is required"</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="c">// Simulate not found</span>
        <span class="k">if</span> <span class="n">id</span> <span class="o">==</span> <span class="s">"999"</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">NewNotFoundError</span><span class="p">(</span><span class="s">"User with ID "</span> <span class="o">+</span> <span class="n">id</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span><span class="s">"id"</span><span class="o">:</span> <span class="n">id</span><span class="p">,</span> <span class="s">"name"</span><span class="o">:</span> <span class="s">"User"</span><span class="p">})</span>
    <span class="p">})</span>

    <span class="n">r</span><span class="o">.</span><span class="n">Serve</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="file-server">File Server</h2>

<p>Serving static files:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"github.com/douglasgreyling/router"</span>
    <span class="s">"net/http"</span>
    <span class="s">"os"</span>
    <span class="s">"path/filepath"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">r</span> <span class="o">:=</span> <span class="n">router</span><span class="o">.</span><span class="n">New</span><span class="p">()</span>

    <span class="c">// Serve files from public directory</span>
    <span class="n">r</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/static/*filepath"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
        <span class="n">filepath</span> <span class="o">:=</span> <span class="n">c</span><span class="o">.</span><span class="n">Param</span><span class="p">(</span><span class="s">"filepath"</span><span class="p">)</span>
        <span class="n">fullPath</span> <span class="o">:=</span> <span class="n">filepath</span><span class="o">.</span><span class="n">Join</span><span class="p">(</span><span class="s">"public"</span><span class="p">,</span> <span class="n">filepath</span><span class="p">)</span>

        <span class="c">// Check if file exists</span>
        <span class="k">if</span> <span class="n">_</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">os</span><span class="o">.</span><span class="n">Stat</span><span class="p">(</span><span class="n">fullPath</span><span class="p">);</span> <span class="n">os</span><span class="o">.</span><span class="n">IsNotExist</span><span class="p">(</span><span class="n">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="m">404</span><span class="p">,</span> <span class="s">"File not found"</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="n">http</span><span class="o">.</span><span class="n">ServeFile</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">ResponseWriter</span><span class="p">(),</span> <span class="n">c</span><span class="o">.</span><span class="n">Request</span><span class="p">(),</span> <span class="n">fullPath</span><span class="p">)</span>
        <span class="k">return</span> <span class="no">nil</span>
    <span class="p">})</span>

    <span class="c">// API routes</span>
    <span class="n">r</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/api/users"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"Alice"</span><span class="p">,</span> <span class="s">"Bob"</span><span class="p">})</span>
    <span class="p">})</span>

    <span class="n">r</span><span class="o">.</span><span class="n">Serve</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="complete-application">Complete Application</h2>

<p>A more complete example with multiple features:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"github.com/douglasgreyling/router"</span>
    <span class="s">"log"</span>
    <span class="s">"time"</span>
<span class="p">)</span>

<span class="c">// Middleware</span>
<span class="k">func</span> <span class="n">loggingMiddleware</span><span class="p">(</span><span class="n">next</span> <span class="n">router</span><span class="o">.</span><span class="n">HandlerFunc</span><span class="p">)</span> <span class="n">router</span><span class="o">.</span><span class="n">HandlerFunc</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">func</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
        <span class="n">start</span> <span class="o">:=</span> <span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span>
        <span class="n">log</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"→ %s %s"</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">Method</span><span class="p">(),</span> <span class="n">c</span><span class="o">.</span><span class="n">Path</span><span class="p">())</span>
        <span class="n">err</span> <span class="o">:=</span> <span class="n">next</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="n">log</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"← %s %s (%v)"</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">Method</span><span class="p">(),</span> <span class="n">c</span><span class="o">.</span><span class="n">Path</span><span class="p">(),</span> <span class="n">time</span><span class="o">.</span><span class="n">Since</span><span class="p">(</span><span class="n">start</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">err</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">authMiddleware</span><span class="p">(</span><span class="n">next</span> <span class="n">router</span><span class="o">.</span><span class="n">HandlerFunc</span><span class="p">)</span> <span class="n">router</span><span class="o">.</span><span class="n">HandlerFunc</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">func</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
        <span class="n">token</span> <span class="o">:=</span> <span class="n">c</span><span class="o">.</span><span class="n">Request</span><span class="p">()</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"Authorization"</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">token</span> <span class="o">!=</span> <span class="s">"Bearer secret"</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="m">401</span><span class="p">,</span> <span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span><span class="s">"error"</span><span class="o">:</span> <span class="s">"Unauthorized"</span><span class="p">})</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">next</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c">// Controllers</span>
<span class="k">type</span> <span class="n">PostController</span> <span class="k">struct</span><span class="p">{}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">pc</span> <span class="o">*</span><span class="n">PostController</span><span class="p">)</span> <span class="n">Index</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="n">posts</span> <span class="o">:=</span> <span class="p">[]</span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span>
        <span class="p">{</span><span class="s">"id"</span><span class="o">:</span> <span class="s">"1"</span><span class="p">,</span> <span class="s">"title"</span><span class="o">:</span> <span class="s">"First Post"</span><span class="p">},</span>
        <span class="p">{</span><span class="s">"id"</span><span class="o">:</span> <span class="s">"2"</span><span class="p">,</span> <span class="s">"title"</span><span class="o">:</span> <span class="s">"Second Post"</span><span class="p">},</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="n">posts</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">pc</span> <span class="o">*</span><span class="n">PostController</span><span class="p">)</span> <span class="n">Show</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="n">id</span> <span class="o">:=</span> <span class="n">c</span><span class="o">.</span><span class="n">Param</span><span class="p">(</span><span class="s">"id"</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span>
        <span class="s">"id"</span><span class="o">:</span>    <span class="n">id</span><span class="p">,</span>
        <span class="s">"title"</span><span class="o">:</span> <span class="s">"Post "</span> <span class="o">+</span> <span class="n">id</span><span class="p">,</span>
    <span class="p">})</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">pc</span> <span class="o">*</span><span class="n">PostController</span><span class="p">)</span> <span class="n">Create</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="m">201</span><span class="p">,</span> <span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span><span class="s">"status"</span><span class="o">:</span> <span class="s">"created"</span><span class="p">})</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">r</span> <span class="o">:=</span> <span class="n">router</span><span class="o">.</span><span class="n">New</span><span class="p">()</span>

    <span class="c">// Global middleware</span>
    <span class="n">r</span><span class="o">.</span><span class="n">Use</span><span class="p">(</span><span class="n">loggingMiddleware</span><span class="p">)</span>

    <span class="c">// Public routes</span>
    <span class="n">r</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="s">"&lt;h1&gt;Welcome to the API&lt;/h1&gt;"</span><span class="p">)</span>
    <span class="p">})</span>

    <span class="n">r</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/health"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span><span class="s">"status"</span><span class="o">:</span> <span class="s">"ok"</span><span class="p">})</span>
    <span class="p">})</span>

    <span class="c">// Protected API</span>
    <span class="n">api</span> <span class="o">:=</span> <span class="n">r</span><span class="o">.</span><span class="n">Group</span><span class="p">(</span><span class="s">"/api"</span><span class="p">,</span> <span class="n">authMiddleware</span><span class="p">)</span>
    <span class="n">api</span><span class="o">.</span><span class="n">Resources</span><span class="p">(</span><span class="s">"/posts"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">PostController</span><span class="p">{},</span>
        <span class="n">router</span><span class="o">.</span><span class="n">Only</span><span class="p">(</span><span class="n">router</span><span class="o">.</span><span class="n">IndexAction</span><span class="p">,</span> <span class="n">router</span><span class="o">.</span><span class="n">ShowAction</span><span class="p">,</span> <span class="n">router</span><span class="o">.</span><span class="n">CreateAction</span><span class="p">))</span>

    <span class="c">// Start server</span>
    <span class="n">log</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Server starting on :3000"</span><span class="p">)</span>
    <span class="n">r</span><span class="o">.</span><span class="n">Serve</span><span class="p">(</span><span class="n">router</span><span class="o">.</span><span class="n">WithPort</span><span class="p">(</span><span class="m">3000</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="testing-routes">Testing Routes</h2>

<p>Example of how to test your routes:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"github.com/douglasgreyling/router"</span>
    <span class="s">"net/http"</span>
    <span class="s">"net/http/httptest"</span>
    <span class="s">"testing"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">TestGetUser</span><span class="p">(</span><span class="n">t</span> <span class="o">*</span><span class="n">testing</span><span class="o">.</span><span class="n">T</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">r</span> <span class="o">:=</span> <span class="n">router</span><span class="o">.</span><span class="n">New</span><span class="p">()</span>

    <span class="n">r</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/users/:id"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">router</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
        <span class="n">id</span> <span class="o">:=</span> <span class="n">c</span><span class="o">.</span><span class="n">Param</span><span class="p">(</span><span class="s">"id"</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span><span class="s">"id"</span><span class="o">:</span> <span class="n">id</span><span class="p">})</span>
    <span class="p">})</span>

    <span class="c">// Create test request</span>
    <span class="n">req</span> <span class="o">:=</span> <span class="n">httptest</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="s">"/users/123"</span><span class="p">,</span> <span class="no">nil</span><span class="p">)</span>
    <span class="n">rec</span> <span class="o">:=</span> <span class="n">httptest</span><span class="o">.</span><span class="n">NewRecorder</span><span class="p">()</span>

    <span class="c">// Serve the request</span>
    <span class="n">r</span><span class="o">.</span><span class="n">ServeHTTP</span><span class="p">(</span><span class="n">rec</span><span class="p">,</span> <span class="n">req</span><span class="p">)</span>

    <span class="c">// Check response</span>
    <span class="k">if</span> <span class="n">rec</span><span class="o">.</span><span class="n">Code</span> <span class="o">!=</span> <span class="m">200</span> <span class="p">{</span>
        <span class="n">t</span><span class="o">.</span><span class="n">Errorf</span><span class="p">(</span><span class="s">"Expected status 200, got %d"</span><span class="p">,</span> <span class="n">rec</span><span class="o">.</span><span class="n">Code</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">expected</span> <span class="o">:=</span> <span class="s">`{"id":"123"}`</span>
    <span class="k">if</span> <span class="n">rec</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">String</span><span class="p">()</span> <span class="o">!=</span> <span class="n">expected</span> <span class="p">{</span>
        <span class="n">t</span><span class="o">.</span><span class="n">Errorf</span><span class="p">(</span><span class="s">"Expected body %s, got %s"</span><span class="p">,</span> <span class="n">expected</span><span class="p">,</span> <span class="n">rec</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">String</span><span class="p">())</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

      </article>
    </main>
  </div>

  <footer class="footer">
    <p>&copy; 2025 Router. Licensed under MIT License.</p>
    <p>
      <a href="https://github.com/douglasgreyling/router">GitHub</a> |
      <a href="https://pkg.go.dev/github.com/douglasgreyling/router">pkg.go.dev</a>
    </p>
  </footer>

  <script src="/router/assets/js/toc.js"></script>
</body>
</html>
